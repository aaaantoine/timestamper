(this.webpackJsonptimestamper=this.webpackJsonptimestamper||[]).push([[0],{14:function(e,t,n){e.exports=n(28)},19:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),s=n.n(i),o=(n(19),n(2)),u=n(3),c=n(7),l=n(6),m=n(4),p=n(5),d=n(13),f=(n(25),function(e){return(e/1e3/60/60).toFixed(2)+"h"}),y=function(e,t){return r.a.createElement("div",{class:"border-bottom mt-4 mb-2 "+t},r.a.createElement("small",null,e))},h=function(e,t,n){return 0!==t&&e[t-1].timestamp.date.isSame(e[t].timestamp.date)?"":y(e[t].timestamp.date.format("YYYY-MM-DD dddd"),n)},E=/#[\w-]+/g,v=function(e){return e.replace(/#/,"").replace(/-/g," ")},b=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return this.props.entries.map((function(t,n){return r.a.createElement(r.a.Fragment,null,h(e.props.entries,n,"row"),r.a.createElement("div",{class:"row p-1"+(t.isBreak?" break-entry":"")},r.a.createElement("span",{class:"col-xs-1"},t.timestamp.renderTime({includeColon:!0})),r.a.createElement("span",null," "),r.a.createElement("span",{class:"col"},t.summary.replace(E,(function(e){return"|".concat(e,"|")})).split("|").map((function(e){return e.match(E)?r.a.createElement("strong",null,v(e)):r.a.createElement(r.a.Fragment,null,e)}))),r.a.createElement("span",null," "),r.a.createElement("span",{class:"col-xs-2 elapsed-time"},function(e){return e.elapsed?"("+f(e.elapsed)+")":""}(t))))}))}}]),n}(r.a.Component),g=function(e,t){return r.a.createElement("div",{class:"col-sm"},r.a.createElement("strong",null,e,": "),r.a.createElement("span",null,f(t)))},k=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.displayHelp?r.a.createElement("p",null,"Use #Hashtagged-Category-Names to categorize time entries. The last entry doesn't count toward totals."):"",r.a.createElement("div",{class:"row"},g("Total Uptime",this.props.entries.filter((function(e){return!e.isBreak})).map((function(e){return e.elapsed})).reduce((function(e,t){return(e||0)+(t||0)}),0)),Object.keys(this.props.tags||[]).sort().map((function(t){return g(v(t),e.props.tags[t])}))))}}]),n}(r.a.Component),C=n(8),w=n.n(C),M=function(e){return e.toString().padStart(4,"0")},S=function(){function e(t){var n,a=this;Object(o.a)(this,e),this.toObject=function(){return{date:a.date,time:a.time,sorttime:a.sorttime}},this.startEntry=function(){return a.setIsMidEntry(!0)},this.completeEntry=function(){return a.setIsMidEntry(!1)},this.renderTime=function(e){return a.isMidEntry?a.time.toString():e&&e.includeColon?(t=M(a.time)).slice(0,2)+":"+t.slice(2):M(a.time);var t},t instanceof Date?(this.date=w()(new Date(t.getFullYear(),t.getMonth(),t.getDate())),this.time=100*(n=t).getHours()+n.getMinutes(),this.sorttime=this.time,this.isMidEntry=!1):(this.date=w()(new Date(t.date)),this.time=t.time,this.sorttime=t.sorttime,this.setIsMidEntry(!1))}return Object(u.a)(e,[{key:"getSortable",value:function(){var e=M(this.sorttime),t=parseInt(e.slice(0,2)),n=parseInt(e.slice(2))+60*t;return w()(this.date).add(n,"m")}},{key:"setIsMidEntry",value:function(e){return this.isMidEntry=e,e||(!function(e){return e&&!isNaN(e)&&0<=parseInt(e)&&parseInt(e)<=2359&&parseInt(e.slice(-2))<60}(this.time.toString())?this.time=this.sorttime:this.sorttime=this.time),this}},{key:"setTime",value:function(e){return e||(e=0),isNaN(e)||(this.time=parseInt(e)),this}}]),e}(),T=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).startTimeEntry=function(e){return a.updateTimeProp(e,(function(e){return e.startEntry()}))},a.completeTimeEntry=function(e){return a.updateTimeProp(e,(function(e){return e.completeEntry()}))},a.updateTime=function(e,t){return a.updateTimeProp(e,(function(e){return e.setTime(t)}))},a.updateTimeProp=function(e,t){return a.updateEntry(e,"timestamp",(function(e){return t(e.timestamp)}))},a.updateSummary=function(e,t){return a.updateEntry(e,"summary",t)},a.updateIsBreak=function(e){return a.updateEntry(e,"isBreak",(function(e){return!e.isBreak}))},a.toggleCopyMode=function(){return a.updateCopyMode(!a.state.isCopyMode)},a.state={entries:a.loadEntries(),isCopyMode:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=function(e){return"input-group"+(e.isBreak?" break-entry":"")},n=function(n,a){return r.a.createElement(r.a.Fragment,null,h(e.state.entries,a),r.a.createElement("div",{class:t(n)},r.a.createElement("input",{type:"number",class:"form-control timestamp",ref:n.timestampRef,autoFocus:!0,maxlength:"4",value:n.timestamp.renderTime(),onChange:function(t){return e.updateTime(a,t.target.value)},onFocus:function(){return e.startTimeEntry(a)},onBlur:function(){return e.completeTimeEntry(a)},onKeyDown:function(t){return e.arrowKeyFocus(a,t,"timestamp")}}),r.a.createElement("input",{type:"text",class:"form-control",ref:n.summaryRef,value:n.summary,onChange:function(t){return e.updateSummary(a,t.target.value)},onKeyDown:function(t){return e.arrowKeyFocus(a,t,"summary")}}),r.a.createElement("div",{class:"input-group-append"},function(t,n,a){return a?"":r.a.createElement("button",{class:"btn btn-outline-secondary",type:"button",title:"Add a new entry to resume this task.",onClick:function(t){return e.resumeEntry(n)}},r.a.createElement(m.a,{icon:p.b}))}(0,a,a===e.state.entries.length-1),r.a.createElement("button",{class:"btn "+(n.isBreak?"btn-secondary":"btn-outline-secondary"),type:"button",title:"Toggle break.",onClick:function(t){return e.updateIsBreak(a)}},r.a.createElement(m.a,{icon:p.a})),r.a.createElement("button",{class:"btn btn-outline-danger",type:"button",title:"Remove entry.",onClick:function(t){return e.removeEntry(a)}},r.a.createElement(m.a,{icon:p.d})))))},a=this.state.isCopyMode?r.a.createElement(b,{entries:e.state.entries}):r.a.createElement(r.a.Fragment,null,e.state.entries.map(n),r.a.createElement("div",{class:"mt-2"},r.a.createElement("button",{class:"btn btn-primary",type:"button",title:"Add an entry.",onClick:function(){return e.addEntry()},disabled:e.state.isCopyMode},r.a.createElement(m.a,{icon:p.c})),r.a.createElement("button",{class:"btn btn-secondary ml-1",type:"button",title:"Take a break.",onClick:function(t){return e.addEntry("Break",!0)},disabled:e.state.isCopyMode},r.a.createElement(m.a,{icon:p.a})),r.a.createElement("button",{class:"btn btn-danger ml-1",type:"button",title:"Clear all entries.",onClick:function(){return e.clearAllEntries()}},r.a.createElement(m.a,{icon:p.d}))));return r.a.createElement("div",{class:"container"},r.a.createElement("ul",{class:"nav nav-tabs"},r.a.createElement("li",{class:"nav-item"},r.a.createElement("button",{type:"button",class:"nav-link ".concat(this.state.isCopyMode?"":"active"),onClick:function(){return e.updateCopyMode(!1)}},"Entry")),r.a.createElement("li",{class:"nav-item"},r.a.createElement("button",{type:"button",class:"nav-link ".concat(this.state.isCopyMode?"active":""),onClick:function(){return e.updateCopyMode(!0)}},"Report"))),a,y("Totals",this.state.isCopyMode?"row":""),r.a.createElement(k,{entries:this.state.entries,tags:this.state.tags,displayHelp:!this.state.isCopyMode}))}},{key:"arrowKeyFocus",value:function(e,t,n){var a=e;if(38===t.keyCode){if(t.preventDefault(),e<=0)return;a-=1}else{if(40!==t.keyCode&&13!==t.keyCode)return;if(t.preventDefault(),e>=this.state.entries.length-1)return void(""!==this.state.entries[e].summary.trim()&&this.addEntry());a+=1}this.state.entries[a][n+"Ref"].current.focus()}},{key:"updateEntry",value:function(e,t,n){if("function"!==typeof n){var a=n;n=function(e){return a}}var r=this.state.entries;r[e][t]=n(r[e]),r.sort((function(e,t){return e.timestamp.getSortable()-t.timestamp.getSortable()})),this.setStateWrapper({entries:r})}},{key:"resumeEntry",value:function(e){var t=this.state.entries[e],n=t.summary;n=n.startsWith("Resume ")?n:"Resume "+n,this.addEntry(n,t.isBreak)}},{key:"addEntry",value:function(e,t){e||(e="");var n=this.state.entries;n.push(this.createEntry({timestamp:new S(new Date),summary:e,isBreak:!!t})),this.setStateWrapper({entries:n})}},{key:"createEntry",value:function(e){return{timestamp:e.timestamp,summary:e.summary,isBreak:!!e.isBreak,timestampRef:r.a.createRef(),summaryRef:r.a.createRef()}}},{key:"removeEntry",value:function(e){var t=this.state.entries;t.splice(e,1),this.setStateWrapper({entries:t})}},{key:"updateCopyMode",value:function(e){var t=e;this.setState({isCopyMode:t})}},{key:"clearAllEntries",value:function(){var e=this;Object(d.confirmAlert)({title:"Clear all entries",message:"Are you sure?",buttons:[{label:"Yes, Clear",onClick:function(){e.setState({entries:[]})}},{label:"No, Cancel"}]})}},{key:"setStateWrapper",value:function(e){this.calculateTimeElapsed(e),this.setState(e),this.saveEntries(this.state.entries)}},{key:"calculateTimeElapsed",value:function(e){for(var t=0;t<e.entries.length;t++){var n=e.entries[t];n.elapsed=t+1<e.entries.length?(a=n.timestamp,e.entries[t+1].timestamp.getSortable()-a.getSortable()):null}var a;e.tags=[],e.entries.filter((function(e){return e.summary.search(E)>=0})).forEach((function(t){var n;(n=t.summary,n.match(E)).filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(n){e.tags[n]=(e.tags[n]||0)+t.elapsed}))}))}},{key:"saveEntries",value:function(e){var t=e.map((function(e){return{timestamp:e.timestamp.toObject(),summary:e.summary,isBreak:e.isBreak}}));localStorage.setItem("entries",JSON.stringify(t))}},{key:"loadEntries",value:function(){var e=JSON.parse(localStorage.getItem("entries"));if(e)for(var t=0;t<e.length;t++)e[t].timestamp=new S(e[t].timestamp),e[t]=this.createEntry(e[t]);return e||[]}}]),n}(r.a.Component);n(27);var O=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("nav",{class:"navbar navbar-dark bg-dark"},r.a.createElement("a",{class:"navbar-brand",href:"."},"Timestamper"),r.a.createElement("a",{class:"nav-link p-2",href:"https://github.com/aaaantoine/timestamper",target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub"},r.a.createElement("svg",{class:"navbar-nav-svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 499.36",focusable:"false"},r.a.createElement("title",null,"GitHub"),r.a.createElement("path",{d:"M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z",fill:"currentColor","fill-rule":"evenodd"})))),r.a.createElement(T,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.d41917b6.chunk.js.map